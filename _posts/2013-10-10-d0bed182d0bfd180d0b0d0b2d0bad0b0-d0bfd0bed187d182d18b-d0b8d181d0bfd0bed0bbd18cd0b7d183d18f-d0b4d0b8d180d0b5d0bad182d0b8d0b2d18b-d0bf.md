---
id: 361
title: 'Отправка почты используя директивы протокола SMTP'
date: '2013-10-10T21:34:48+03:00'
author: 'Андрей Гуцу'
layout: post
guid: 'http://blog.glowingsword.ru/?p=361'
permalink: /%d0%be%d1%82%d0%bf%d1%80%d0%b0%d0%b2%d0%ba%d0%b0-%d0%bf%d0%be%d1%87%d1%82%d1%8b-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d1%8f-%d0%b4%d0%b8%d1%80%d0%b5%d0%ba%d1%82%d0%b8%d0%b2%d1%8b-%d0%bf/
categories:
    - linux
---

<p>Вы никогда не пытались отправить письмо не используя для этого специализированное ПО(почтовые клиенты, sendmail и т.п.)? Если вам интересно, как отправлять письма не имея под рукой ПО для отправки писем - этот пост для вас.</p>

<p>Начнём с основ протокола SMTP. Для отправки почты нужно постучаться на smtp-сервер, если нужно - пройти аутентификацию, и собственно отправить письмо.</p>

<p>Самый простой способ сделать это - это использовать для отправки письма популярную утилиту telnet.  Пользоваться ей довольно просто:</p>
<pre>
<code>
telnet адрес_smtp_сервера номер_порта
</code>
</pre>
К примеру, так
<pre>
<code>
telnet localhost 25
</code>
</pre>
или так
<pre>
<code>
telnet localhost 587
</code>
</pre>
Теперь вам нужно представится. Набираем:
<pre>
<code>
HELO имя_вашего_узла
</code>
</pre>
Где HELO(или EHLO) - директива, позволяющая вам представиться серверу SMTP, а имя_вашего_узла(к примеру) - localhost.

Указываем, от кого письмо:
<pre>
<code>
MAIL FROM: &lt;адрес@отправителя&gt;
</code>
</pre>
Указываем адрес получателя:
<pre>
<code>
RCPT TO: &lt;адрес@получателя&gt;
</code>
</pre>
А теперь, собственно, само письмо:
<pre>
<code>
DATA

from: "Имя Отправителя"адрес@отправителя

to: "Имя Получателя" адрес@получателя

subject: Тема нашего письма

Текст письма.

.
</code>
</pre>

Всё, что между DATA и сигнализирующей о завершении ввода письма одинокой точки в отдельной строке - это наше послание. Оно должно содержать поля from, to и subject, и собственно текст письма. Для завершения сеанса связи наберите

<pre>
<code>
QUIT
</code>
</pre>

и нажмите на Enter. Всё, вы успешно отослали письмо. Правда, только если использовали в качестве smtp-сервера установленный локально smtp-сервер, или один из анонимных серверов. Большинство smtp-серверов требуют от своих клиентов аутентификацию по логину и паролю. А Gmail, и другие крупные почтовые сервисы, требуют установление безопасного соединения, зашифрованного с помощью протокола TLS. Как установить зашифрованное соединение, используя TLS, и пройти аутентификацию, представив свой логин и пароль от своей учётной записи почтового сервиса, я расскажу в продолжении данного топика.