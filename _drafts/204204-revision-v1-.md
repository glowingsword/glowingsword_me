---
id: 209
date: '2013-01-01T17:45:19+02:00'
author: 'Андрей Гуцу'
layout: revision
guid: 'http://blog.lordofgale.org/2013/01/204-revision-4/'
permalink: '/?p=209'
---

<p>Решив создать себе загрузочную флешку, и не горя желанием воспроизводить для создания одного файла grub.cfg всю инфраструктуру по генерации конфигурационного файла для grub2(основанную на куче скриптов), я принял решение создать grub.cfg ручками. В обычном текстовом редакторе.</p>

<p>Что обязательно должно быть в файле конфигурации GRUB2?</p>

<p>Пункт меню, выбранный по умолчанию и задержка(в секундах) перед загрузкой пункта,  выбранного по умолчанию. Если пользователь переходит к другому пункту меню, отсчёт таймера останавливается. Для указания пункта, загружаемого по умолчанию и задержки перед автоматической загрузкой, добавьте в grub.cfg эти строки:</p>
<pre>
<code clas="bash">
set default="0"
set timeout=10
</code>
</pre>
<p>Для указания шрифта, используемого grub2 укажите путь к файлу этого шрифта в формате pf2. Файлы шрифтов для grub2 можно найти в директории /usr/share/grub, откуда можно скопировать нужный шрифт в каталог /boot/grub/fonts(если его там у вас нет, конечно). У меня это путь к unicode.pf2, благодаря которому можно использовать в том числе и символы кириллического алфавита. Добавьте в файл grub.cfg строку:</p>
<pre>
<code clas="bash">
set font="/boot/grub/fonts/unicode.pf2"
</code>
</pre>
<p>Теперь нужно указать цвет фона для обычного и подсвеченного(выбранного) пункта меню. Делается это заданием двум переменным значений цветов фона и цвета шрифта. В первом случае(не подсвеченный пункт меню) цвет текста будет белым, на чёрном фоне. Для подсвеченного пункта меню я выбрал чёрный текст на светло-сером фоне. Добавляем в grub.cfg следующие строки:</p>
<pre>
<code clas="bash"> 
set menu_color_normal=white/black
set menu_color_highlight=black/light-gray
</code>
</pre>
<p>Ну, и напоследок, создадим два пункта для нашего меню: перезагрузка и выключение компьютера:</p>
<pre>
<code clas="bash">
menuentry "Shutdown the Computer" {
    halt
}

menuentry "Reboot the Computer" {
    reboot
}
</code>
</pre>
<p>Ну, и конечно-же вам хочется глянуть на результат. Вот он:</p>
<a href="http://blog.lordofgale.org/2013/01/204/screenshot-from-2012-12-31-151708/" rel="attachment wp-att-205"><img src="http://blog.lordofgale.org/wp-content/uploads/2013/01/Screenshot-from-2012-12-31-151708-150x150.png" alt="Screenshot from 2012-12-31 15:17:08" width="150" height="150" class="aligncenter size-thumbnail wp-image-205" /></a>
<p>В следующей записи я покажу, как добавить в grub.cfg код, устанавливающий графический режим, разрешение и фоновую картинку для нашего меню.</p>
